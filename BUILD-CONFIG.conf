# Build Configuration for CI/CD Pipeline
# This file contains build settings and options for various CI/CD platforms

# Maven Configuration
maven {
  version = "3.9.12"
  java_version = "21"
  compiler_source = "21"
  compiler_target = "21"
  
  # Profiles - uncomment to activate
  # profiles = "prod,docker,allure"
  
  # Build options
  clean = true
  compile = true
  test = true
  verify = true
  package = true
  
  # Test configuration
  tests_enabled = true
  parallel_threads = 4
  skip_integration_tests = false
  
  # Coverage options
  jacoco_enabled = true
  coverage_minimum = 70  # Percentage
  
  # Allure reporting
  allure_enabled = true
  allure_version = "2.24.0"
}

# Docker Configuration
docker {
  enabled = true
  registry = "docker.io"
  
  # Image details
  image_name = "nikkks2000/ai-qa-faang-agent"
  base_image = "eclipse-temurin:21-jdk-jammy"
  
  # Build options
  multi_stage = true
  minimize_layers = true
  cache_from = true
  
  # Image metadata
  labels {
    maintainer = "QA Team"
    version = "1.0"
    description = "AI QA FAANG Agent - Java 21 with TestNG and Allure"
  }
}

# Jenkins Configuration
jenkins {
  enabled = true
  
  # Tools
  maven_tool = "Maven3.9.12"
  jdk_tool = "JDK21"
  
  # Pipeline settings
  agent_type = "any"
  timeout_minutes = 60
  build_discarder_keep = 10
  
  # Features
  docker_support = true
  allure_reports = true
  email_notifications = true
  slack_notifications = false  # Set to true if Slack plugin installed
  
  # Credentials
  docker_credentials_id = "docker-credentials"
  github_credentials_id = "github-token"
}

# GitHub Actions Configuration
github_actions {
  enabled = true
  
  # Workflow triggers
  triggers = [
    "push:master",
    "push:main", 
    "push:develop",
    "pull_request:master",
    "pull_request:main",
    "schedule:daily:2am_utc"
  ]
  
  # Runner specification
  runs_on = "ubuntu-latest"
  timeout_minutes = 30
  
  # Job configuration
  parallel_jobs = true
  artifact_retention_days = 30
  
  # Features
  pages_enabled = true
  security_scan = true
  docker_push = true
}

# GitLab CI Configuration
gitlab_ci {
  enabled = true
  
  # Pipeline
  stages = [
    "build",
    "test",
    "report",
    "docker",
    "deploy"
  ]
  
  # Cache
  cache_paths = [
    ".m2/repository"
  ]
  
  # Features
  artifacts_enabled = true
  reports_enabled = true
  security_scanning = true
  pages_deployment = true
  
  # Deployment
  deploy_to_test = true
  deploy_to_prod = true
  manual_deploy = true
}

# Kubernetes Deployment
kubernetes {
  enabled = true
  
  # Clusters
  clusters = [
    "test",
    "production"
  ]
  
  # Namespace
  namespace_test = "test"
  namespace_prod = "production"
  
  # Deployment settings
  replicas_test = 1
  replicas_prod = 3
  
  # Resources
  cpu_request = "200m"
  cpu_limit = "500m"
  memory_request = "256Mi"
  memory_limit = "512Mi"
  
  # Health checks
  liveness_probe = true
  readiness_probe = true
}

# SonarQube (Code Quality)
sonarqube {
  enabled = false  # Set to true if SonarQube available
  
  host = "https://sonarqube.example.com"
  project_key = "com.faang.ai:ai-agent"
  
  # Analysis settings
  skip_tests = false
  include_coverage = true
  quality_gate_enabled = true
}

# Security Scanning
security {
  # OWASP Dependency Check
  owasp_check = true
  
  # Container scanning
  container_scanning = true
  
  # Secret scanning
  secret_scanning = true
  
  # SAST (Static Application Security Testing)
  sast_enabled = true
}

# Notifications
notifications {
  # Email notifications
  email_enabled = true
  email_recipients = [
    "qa-team@example.com"
  ]
  
  # Slack notifications
  slack_enabled = false
  slack_webhook = "https://hooks.slack.com/..."
  
  # Microsoft Teams
  teams_enabled = false
  teams_webhook = "https://outlook.webhook.office.com/..."
}

# Build Profiles
profiles {
  dev {
    skip_tests = false
    docker_push = false
    deploy = false
  }
  
  test {
    skip_tests = false
    docker_push = true
    deploy = true
    target = "test"
  }
  
  prod {
    skip_tests = false
    docker_push = true
    deploy = true
    target = "production"
    manual_approval = true
  }
}
